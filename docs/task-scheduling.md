# Task Scheduling & Management

## Overview
Task management is the core operational layer of StudentFlow. It allows users to create, track, and complete academic tasks. While task creation is manual, the system uses AI to suggest optimal execution schedules.

## Data Model
**Table**: `tasks`
- `id`: Primary Key
- `uid`: User ID
- `title`: Task description
- `deadline`: Due date/time
- `duration_mins`: Estimated time to complete
- `priority`: 'Low', 'Medium', 'High', 'Urgent'
- `category`: 'Exam', 'Assignment', 'Study', 'Other'
- `status`: 'Pending' | 'Completed'

## Scheduling Logic

### 1. Manual Scheduling
- Users explicitly set a `deadline` when creating a task.
- Tasks are sorted by `deadline ASC` in the `getTasks` controller, ensuring the most urgent tasks appear first.

### 2. AI-Assisted Planning (The "Smart Schedule")
- The **AI Planner** (`frontend/components/AIPlanner.tsx`) does *not* modify the database `deadline` directly.
- Instead, it generates a **Suggested Schedule** (a temporary plan) for the current day.
- **Logic**:
    - The AI looks at `duration_mins` and `priority`.
    - It fits tasks into the user's available hours (inferred from `wake_up_time` and `sleep_time` in routine logs).
    - It prioritizes 'Urgent' and 'High' priority tasks.
    - Output is a list of time slots (e.g., "09:00 - 10:30: Study Math").

### 3. Task Lifecycle
- **Creation**: `POST /api/tasks` - Created with status 'Pending'.
- **Completion**: `PATCH /api/tasks/:id/complete` - Updates status to 'Completed'.
- **Reversal**: `PATCH /api/tasks/:id/uncomplete` - Reverts to 'Pending'.
- **Deletion**: `DELETE /api/tasks/:id` - Permanently removes the task.

## Integration with Insights
- Completed tasks contribute to the **Productivity Score** generated by the AI.
- Pending tasks are the primary input for the AI's daily schedule generation.
